(this.webpackJsonpcycle=this.webpackJsonpcycle||[]).push([[0],{35:function(t,e,n){t.exports=n.p+"static/media/cycles.49640d22.csv"},83:function(t,e,n){t.exports=n(92)},88:function(t,e,n){},92:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),c=n(31),o=n.n(c),l=(n(88),n(5)),i=n.n(l),u=n(13),s=n(8),d=n(9),f=n(11),p=n(10),m=n(12),h=n(2),g=n(1),v={black:"#171623",white:"#fff",lightGreen:"#E8F6EE",green:"#60C022",darkGreen:"#18AA52"},b=n(3),y=n(7);function x(){return(x=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t}).apply(this,arguments)}function w(t,e){if(null==t)return{};var n,a,r=function(t,e){if(null==t)return{};var n,a,r={},c=Object.keys(t);for(a=0;a<c.length;a++)n=c[a],e.indexOf(n)>=0||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(t);for(a=0;a<c.length;a++)n=c[a],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}var E=r.a.createElement("g",null,r.a.createElement("g",null,r.a.createElement("path",{d:"M407.531,206.527c-13.212,0-25.855,2.471-37.501,6.966c-9.124-20.276-17.007-41.719-20.944-61.668 c-6.323-32.038-34.634-55.291-67.318-55.291c-8.284,0-15,6.716-15,15s6.716,15,15,15c3.569,0,7.044,0.498,10.355,1.423 c10.063,2.812,18.602,9.618,23.582,18.758c-0.403,0.512-0.787,1.043-1.128,1.618l-4.66,7.845l-23.576,39.69H160.377l-7.16-18.021 h2.972c8.284,0,15-6.716,15-15s-6.716-15-15-15H104.47c-8.284,0-15,6.716-15,15s6.716,15,15,15h16.466l13.09,32.944 c-9.376-2.77-19.294-4.265-29.556-4.265C46.865,206.527,0,253.392,0,310.996s46.865,104.469,104.469,104.469 c52.511,0,96.091-38.946,103.388-89.469h27.547c5.292,0,10.193-2.789,12.896-7.339l78.827-132.706 c4.624,14.31,10.412,28.648,16.651,42.346c-24.747,19.122-40.716,49.079-40.716,82.7c0,57.604,46.865,104.469,104.469,104.469 S512,368.601,512,310.997S465.135,206.527,407.531,206.527z M104.469,325.996h72.951c-6.96,33.897-37.025,59.469-72.951,59.469 C63.407,385.464,30,352.058,30,310.996c0-41.062,33.407-74.469,74.469-74.469c35.926,0,65.991,25.572,72.951,59.469h-72.951 c-8.284,0-15,6.716-15,15S96.185,325.996,104.469,325.996z M226.867,295.996h-19.01c-3.481-24.099-15.216-45.561-32.241-61.421 c-0.156-0.602-0.337-1.202-0.573-1.795l-2.746-6.911h96.225L226.867,295.996z M407.531,385.464 c-41.063,0-74.469-33.407-74.469-74.469c0-21.753,9.378-41.355,24.301-54.983c18.448,35.256,36.467,61.538,37.823,63.504 c2.911,4.217,7.594,6.48,12.358,6.48c2.938,0,5.907-0.862,8.508-2.657c6.818-4.706,8.53-14.048,3.824-20.866 c-0.323-0.468-18.475-26.939-36.652-61.853c7.624-2.641,15.797-4.095,24.307-4.095c41.062,0,74.469,33.407,74.469,74.469 C482,352.056,448.593,385.464,407.531,385.464z"}))),k=r.a.createElement("g",null),C=r.a.createElement("g",null),j=r.a.createElement("g",null),O=r.a.createElement("g",null),M=r.a.createElement("g",null),D=r.a.createElement("g",null),I=r.a.createElement("g",null),B=r.a.createElement("g",null),V=r.a.createElement("g",null),T=r.a.createElement("g",null),Y=r.a.createElement("g",null),P=r.a.createElement("g",null),A=r.a.createElement("g",null),S=r.a.createElement("g",null),N=r.a.createElement("g",null),U=function(t){var e=t.svgRef,n=t.title,a=w(t,["svgRef","title"]);return r.a.createElement("svg",x({id:"Capa_1",x:"0px",y:"0px",viewBox:"0 0 512 512",style:{enableBackground:"new 0 0 512 512"},xmlSpace:"preserve",ref:e},a),n?r.a.createElement("title",null,n):null,E,k,C,j,O,M,D,I,B,V,T,Y,P,A,S,N)},z=r.a.forwardRef((function(t,e){return r.a.createElement(U,x({svgRef:e},t))}));n.p;function G(){var t=Object(h.a)(["\n    background-color: ",";\n    color:  ",";\n    border-bottom: 1px solid ",";\n    font-size: 1.2rem;\n    cursor: pointer;\n\n"]);return G=function(){return t},t}var W=b.a.a(G(),v.lightGreen,v.darkGreen,v.darkGreen);function R(t){return r.a.createElement(W,t)}function L(){var t=Object(h.a)(["\n    font-weight: bold;\n    font-size: 1.2rem;\n    ",";\n"]);return L=function(){return t},t}function F(){var t=Object(h.a)(["\n    display: flex;\n    justify-content: flex-start;\n"]);return F=function(){return t},t}function H(){var t=Object(h.a)(["\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    padding: 10px 0px;\n"]);return H=function(){return t},t}var J=b.a.div(H()),$=b.a.div(F()),_=b.a.p(L(),y.a);function q(){return r.a.createElement(J,null,r.a.createElement($,null,r.a.createElement(z,{width:"50"}),r.a.createElement(_,{ml:2},"London")),r.a.createElement(R,{href:"github"},"Github"))}function K(){var t=Object(h.a)(["\n    background-color: ",";\n    padding: ",";\n    color: ",";\n    font-size: ",";\n    font-weight:bold;\n    border-radius: 10px;\n    display: inline-block;\n    cursor: pointer;\n    ",";\n"]);return K=function(){return t},t}var Q=b.a.div(K(),(function(t){return t.selected?v.darkGreen:v.lightGreen}),(function(t){return t.small?"10px 40px":"8px 25px"}),(function(t){return t.selected?v.white:v.darkGreen}),(function(t){return t.small?"0.9rem":"1.3rem"}),y.a);function X(t){return r.a.createElement(Q,t)}function Z(){var t=Object(h.a)(["\n    display: flex;\n    justify-content: space-between;\n    flex-wrap: wrap;\n\n    div {\n        margin-top: 10px;\n    }\n"]);return Z=function(){return t},t}var tt=["#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],et=b.a.div(Z()),nt=function(t){function e(t){var n;return Object(s.a)(this,e),(n=Object(f.a)(this,Object(p.a)(e).call(this,t))).createCalendarView=function(){var t=g.h().domain([0,n.getMaxValue()]).range(tt),e=g.i("body").selectAll(".calendarView").append("svg").attr("width",1400).attr("height",300).attr("viewBox",[0,0,1400,300]).attr("font-family","sans-serif").attr("font-size",12).attr("color",v.black).selectAll("g").data([n.props.data[n.state.currentYearIndex]]).join("g").attr("transform",(function(t,e){return"translate(40, ".concat(300*e+37.5,")")}));e.append("text").attr("x",-5).attr("y",-5).attr("font-weight","bold").attr("text-anchor","end").attr("fill",v.black).text((function(t){return t.key})),e.append("g").attr("text-anchor","end").selectAll("text").data(g.e(7).map((function(t){return new Date(1995,0,t)}))).join("text").attr("x",-5).attr("y",(function(t){return 25*((t.getUTCDay()+6)%7+.5)})).attr("dy","0.31em").attr("fill",v.black).text((function(t){return"SMTWTFS"[t.getUTCDay()]})),e.append("g").selectAll("rect").data((function(t){return t.values})).join("rect").attr("width",24).attr("height",24).attr("x",(function(t){return 25*g.k.count(g.p(t.date),t.date)+.5})).attr("y",(function(t){return(t.date.getUTCDay()+6)%7*25+.5})).style("fill",(function(e){return t(e.amount)})).append("title").text((function(t){return t.date+"\n"+t.amount}));var a=e.append("g").selectAll("g").data((function(t){return g.m(g.l(t.values[0].date),t.values[t.values.length-1].date)})).join("g");a.filter((function(t,e){return e})).append("path").attr("fill","none").attr("stroke",v.white).attr("stroke-width",2.5).attr("d",n.pathMonth),a.append("text").attr("x",(function(t){return 25*g.o.count(g.p(t),g.o.ceil(t))+2})).attr("y",-5).attr("fill",v.black).text(g.j("%b"))},n.createBarChartTop=function(){var t=g.g().domain([0,g.c(n.groupByMonth(n.state.currentYearIndex),(function(t){return t.total}))]).nice().range([0,100]);g.i("body").selectAll(".barChartTop").append("svg").attr("width",1400).attr("height",150).attr("viewBox",[0,0,1400,150]).attr("font-family","sans-serif").attr("font-size",12).attr("color",v.black).attr("transform","scale(1, -1)").selectAll("g").data(n.groupByMonth(n.state.currentYearIndex)).enter().append("rect").attr("x",(function(t){return 40+25*g.o.count(g.p(new Date(2011,t.key,1)),g.o.ceil(new Date(2011,t.key,1)))+2})).attr("y",-5).attr("width",20).attr("height",(function(e){return t(e.total)})).attr("fill",v.green)},n.pathMonth=function(t){var e=Math.max(0,Math.min(7,(t.getUTCDay()+6)%7)),n=g.k.count(g.p(t),t);return"".concat(0===e?"M".concat(25*n,",0"):7===e?"M".concat(25*(n+1),",0"):"M".concat(25*(n+1),",0V").concat(25*e,"H").concat(25*n),"V").concat(175)},n.getMaxValue=function(){return g.c(n.props.data.reduce((function(t,e){return t.concat(e.values)}),[]),(function(t){return t.amount}))},n.removePreviousCalendarView=function(){for(var t=document.getElementsByClassName("calendarView")[0];t.hasChildNodes();)t.removeChild(t.lastChild)},n.removePreviousBarChartView=function(){for(var t=document.getElementsByClassName("barChartTop")[0];t.hasChildNodes();)t.removeChild(t.lastChild)},n.groupByMonth=function(t){var e=g.d().key((function(t){return t.date.getMonth()})).entries(n.props.data[t].values);return e.forEach((function(t){t.total=t.values.reduce((function(t,e){return t+e.amount}),0)})),e},n.state={maxValue:0,currentYearIndex:1},n}return Object(m.a)(e,t),Object(d.a)(e,[{key:"componentDidMount",value:function(){this.createBarChartTop(),this.createCalendarView()}},{key:"componentDidUpdate",value:function(t,e){e.currentYearIndex!==this.state.currentYearIndex&&(this.removePreviousCalendarView(),this.createCalendarView(),this.removePreviousBarChartView(),this.createBarChartTop())}},{key:"render",value:function(){var t=this;return r.a.createElement("div",null,r.a.createElement("div",{className:"barChartTop"}),r.a.createElement("div",{className:"calendarView"}),r.a.createElement("p",null,"Select a year"),r.a.createElement(et,null,this.props.data.map((function(e,n){return r.a.createElement(X,{key:n,mr:2,small:!0,selected:t.state.currentYearIndex===e.key-2010,onClick:function(){t.setState({currentYearIndex:e.key-2010})}},e.key)}))))}}]),e}(r.a.Component);function at(){var t=Object(h.a)(["\n    display: flex;\n    justify-content: space-between;\n    flex-wrap: wrap;\n\n    div {\n        margin-top: 10px;\n    }\n"]);return at=function(){return t},t}var rt=["#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],ct=b.a.div(at()),ot=function(t){function e(t){var n;return Object(s.a)(this,e),(n=Object(f.a)(this,Object(p.a)(e).call(this,t))).getMaxValue=function(){return g.c(n.grouped.map((function(t){return t.total})))},n.groupByWeek=function(t){var e=g.d().key((function(t){return n.getWeekNumber(t.date)})).entries(n.props.data[t].values);return e.forEach((function(t){t.total=t.values.reduce((function(t,e){return t+e.amount}),0)})),e},n.getWeekNumber=function(t){(t=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate()))).setUTCDate(t.getUTCDate()+4-(t.getUTCDay()||7));var e=new Date(Date.UTC(t.getUTCFullYear(),0,1));return Math.ceil(((t-e)/864e5+1)/7)},n.createCircularDiagram=Object(u.a)(i.a.mark((function t(){var e,a,r,c,o,l,u,s;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.grouped=n.groupByWeek(n.state.currentYearIndex),e=g.h().domain([0,n.getMaxValue()]).range(rt),r=850-(a={top:100,right:50,bottom:100,left:50}).left-a.right,c=850-a.top-a.bottom,200,o=Math.min(r,c)/2,l=g.i(".circularDiagram").append("svg").attr("width",r+a.left+a.right).attr("height",c+a.top+a.bottom).append("g").attr("transform","translate("+(r/2+a.left)+","+(c/2+a.top)+")"),u=g.f().range([0,2*Math.PI]).align(0).domain(n.grouped.map((function(t,e){return e}))),s=g.g().range([200,o]).domain([0,n.getMaxValue()]),l.append("g").selectAll("path").data(n.grouped).enter().append("path").attr("fill",(function(t){return e(t.total)})).attr("d",g.a().innerRadius(200).outerRadius((function(t){return s(t.total)})).startAngle((function(t,e){return u(e)})).endAngle((function(t,e){return u(e)+u.bandwidth()})).padAngle(.01)),l.append("g").selectAll("g").data(n.grouped).enter().append("g").attr("text-anchor",(function(t,e){return(u(e)+u.bandwidth()/2+Math.PI)%(2*Math.PI)<Math.PI?"end":"start"})).attr("transform",(function(t,e){return"rotate("+(180*(u(e)+u.bandwidth()/2)/Math.PI-90)+")translate("+(s(t.total)+50)+",0)"})).append("text").text((function(t,e){return"Week ".concat(e)})).attr("transform",(function(t,e){return(u(e)+u.bandwidth()/2+Math.PI)%(2*Math.PI)<Math.PI?"rotate(180)":"rotate(0)"})).style("font-size","11px").attr("alignment-baseline","middle");case 8:case"end":return t.stop()}}),t)}))),n.removeCircularDiagram=function(){for(var t=document.getElementsByClassName("circularDiagram")[0];t.hasChildNodes();)t.removeChild(t.lastChild)},n.state={currentYearIndex:2},n.grouped=[],n}return Object(m.a)(e,t),Object(d.a)(e,[{key:"componentDidMount",value:function(){var t=Object(u.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log(this.getMaxValue()),this.createCircularDiagram();case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(t,e){e.currentYearIndex!==this.state.currentYearIndex&&(this.removeCircularDiagram(),this.createCircularDiagram())}},{key:"render",value:function(){var t=this;return r.a.createElement("div",null,r.a.createElement("div",{style:{display:"flex",justifyContent:"center"},className:"circularDiagram"}),r.a.createElement("p",null,"Select a year"),r.a.createElement(ct,null,this.props.data.map((function(e,n){return r.a.createElement(X,{key:n,mr:2,small:!0,selected:t.state.currentYearIndex===e.key-2010,onClick:function(){t.setState({currentYearIndex:e.key-2010})}},e.key)}))))}}]),e}(a.Component),lt=n(35),it=n.n(lt);function ut(){var t=Object(h.a)(["\n  max-width: 500px;\n  ",";\n"]);return ut=function(){return t},t}function st(){var t=Object(h.a)(["\n  font-size: 4rem;\n  font-weight: bold;\n  max-width: 700px;\n  ",";\n  span {\n  }\n"]);return st=function(){return t},t}var dt=b.a.p(st(),y.a),ft=b.a.p(ut(),y.a),pt=function(t){function e(t){var n;return Object(s.a)(this,e),(n=Object(f.a)(this,Object(p.a)(e).call(this,t))).loadData=function(){var t=Object(u.a)(i.a.mark((function t(e){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g.b(e).then((function(t){var e=g.d().key((function(t){return t.date.split("-")[0]})).entries(t);return e.forEach((function(t){t.values.forEach((function(t){t.date=g.n("%Y-%m-%d")(t.date),t.amount=parseInt(t.amount.toString().replace(",",""))}))})),e})).catch((function(t){throw console.log(t),t}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),n.state={data:[{key:"",values:[]}]},n}return Object(m.a)(e,t),Object(d.a)(e,[{key:"componentDidMount",value:function(){var t=Object(u.a)(i.a.mark((function t(){var e;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.loadData(it.a);case 2:e=t.sent,this.setState({data:e});case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){return 1===this.state.data.length?r.a.createElement("div",null,"Loading..."):r.a.createElement("div",{className:"container",style:{backgroundColor:v.white}},r.a.createElement(q,null),r.a.createElement("div",null,r.a.createElement(dt,{mt:6,mb:3},r.a.createElement("span",null,"Cycling in London Over the Past Decade")),r.a.createElement(ft,{mb:6},"Lorem ipsum dolor sit amet, ",r.a.createElement(R,{href:""},"consetetur"),"  sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et"),r.a.createElement(nt,{data:this.state.data}),r.a.createElement("div",{style:{height:"100px"}}),r.a.createElement(ot,{data:this.state.data}),r.a.createElement("div",{style:{height:"100px"}})))}}]),e}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(pt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[83,1,2]]]);
//# sourceMappingURL=main.9c447a31.chunk.js.map