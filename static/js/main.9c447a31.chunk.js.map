{"version":3,"sources":["data/cycles.csv","theme.js","img/bike.svg","components/Link.js","components/NavBar.js","components/Button.js","CalendarView.js","CircularDiagram.js","App.js","serviceWorker.js","index.js"],"names":["module","exports","black","white","lightGreen","green","darkGreen","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","_ref2","createElement","d","_ref3","_ref4","_ref5","_ref6","_ref7","_ref8","_ref9","_ref10","_ref11","_ref12","_ref13","_ref14","_ref15","_ref16","_ref17","_ref","svgRef","title","props","id","x","y","viewBox","style","enableBackground","xmlSpace","ref","ForwardRef","forwardRef","LinkElement","styled","a","theme","Link","Wrapper","div","Flex","Text","p","space","NavBar","width","ml","href","ButtonElement","selected","small","Button","HEATMAP","Years","CalendarView","createCalendarView","color","d3","domain","getMaxValue","range","year","selectAll","append","attr","data","state","currentYearIndex","join","CELL_SIZE","text","map","Date","getUTCDay","values","count","date","amount","month","filter","pathMonth","ceil","createBarChartTop","groupByMonth","total","nice","HEIGHT","enter","t","Math","max","min","w","n","reduce","prev","next","concat","elem","removePreviousCalendarView","chart","document","getElementsByClassName","hasChildNodes","removeChild","lastChild","removePreviousBarChartView","barChart","currentIndexYear","grouped","getMonth","entries","forEach","current","maxValue","prevProps","prevState","className","mr","onClick","setState","React","Component","CircularDiagram","groupByWeek","getWeekNumber","week","UTC","getFullYear","getDate","setUTCDate","getUTCDate","yearStart","getUTCFullYear","createCircularDiagram","margin","top","right","bottom","left","height","outerRadius","svg","PI","align","innerRadius","startAngle","endAngle","bandwidth","padAngle","removeCircularDiagram","circularDiagram","console","log","display","justifyContent","Headline","Intro","App","loadData","fileName","then","csv","split","b","parseInt","toString","replace","catch","error","cycles","result","backgroundColor","mt","mb","Boolean","window","location","hostname","match","ReactDOM","render","getElementById","navigator","serviceWorker","ready","registration","unregister","message"],"mappings":"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","file":"static/js/main.9c447a31.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/cycles.49640d22.csv\";","// theme.js\nexport default {\n    colors: {\n        black: '#171623',\n        white: '#fff',\n        lightGreen: '#E8F6EE',\n        green: \"#60C022\",\n        darkGreen: \"#18AA52\"\n    },\n    space: [0, 4, 8, 16, 32, 64]\n\n}\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"g\", null, React.createElement(\"g\", null, React.createElement(\"path\", {\n  d: \"M407.531,206.527c-13.212,0-25.855,2.471-37.501,6.966c-9.124-20.276-17.007-41.719-20.944-61.668 c-6.323-32.038-34.634-55.291-67.318-55.291c-8.284,0-15,6.716-15,15s6.716,15,15,15c3.569,0,7.044,0.498,10.355,1.423 c10.063,2.812,18.602,9.618,23.582,18.758c-0.403,0.512-0.787,1.043-1.128,1.618l-4.66,7.845l-23.576,39.69H160.377l-7.16-18.021 h2.972c8.284,0,15-6.716,15-15s-6.716-15-15-15H104.47c-8.284,0-15,6.716-15,15s6.716,15,15,15h16.466l13.09,32.944 c-9.376-2.77-19.294-4.265-29.556-4.265C46.865,206.527,0,253.392,0,310.996s46.865,104.469,104.469,104.469 c52.511,0,96.091-38.946,103.388-89.469h27.547c5.292,0,10.193-2.789,12.896-7.339l78.827-132.706 c4.624,14.31,10.412,28.648,16.651,42.346c-24.747,19.122-40.716,49.079-40.716,82.7c0,57.604,46.865,104.469,104.469,104.469 S512,368.601,512,310.997S465.135,206.527,407.531,206.527z M104.469,325.996h72.951c-6.96,33.897-37.025,59.469-72.951,59.469 C63.407,385.464,30,352.058,30,310.996c0-41.062,33.407-74.469,74.469-74.469c35.926,0,65.991,25.572,72.951,59.469h-72.951 c-8.284,0-15,6.716-15,15S96.185,325.996,104.469,325.996z M226.867,295.996h-19.01c-3.481-24.099-15.216-45.561-32.241-61.421 c-0.156-0.602-0.337-1.202-0.573-1.795l-2.746-6.911h96.225L226.867,295.996z M407.531,385.464 c-41.063,0-74.469-33.407-74.469-74.469c0-21.753,9.378-41.355,24.301-54.983c18.448,35.256,36.467,61.538,37.823,63.504 c2.911,4.217,7.594,6.48,12.358,6.48c2.938,0,5.907-0.862,8.508-2.657c6.818-4.706,8.53-14.048,3.824-20.866 c-0.323-0.468-18.475-26.939-36.652-61.853c7.624-2.641,15.797-4.095,24.307-4.095c41.062,0,74.469,33.407,74.469,74.469 C482,352.056,448.593,385.464,407.531,385.464z\"\n})));\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref4 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref5 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref6 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref7 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref8 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref9 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref10 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref11 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref12 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref13 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref14 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref15 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref16 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref17 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar SvgBike = function SvgBike(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return React.createElement(\"svg\", _extends({\n    id: \"Capa_1\",\n    x: \"0px\",\n    y: \"0px\",\n    viewBox: \"0 0 512 512\",\n    style: {\n      enableBackground: \"new 0 0 512 512\"\n    },\n    xmlSpace: \"preserve\",\n    ref: svgRef\n  }, props), title ? React.createElement(\"title\", null, title) : null, _ref2, _ref3, _ref4, _ref5, _ref6, _ref7, _ref8, _ref9, _ref10, _ref11, _ref12, _ref13, _ref14, _ref15, _ref16, _ref17);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgBike, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/bike.bd5c342b.svg\";\nexport { ForwardRef as ReactComponent };","import React from 'react'\nimport styled from 'styled-components'\nimport theme from '../theme'\n\n\nconst LinkElement = styled.a`\n    background-color: ${theme.colors.lightGreen};\n    color:  ${theme.colors.darkGreen};\n    border-bottom: 1px solid ${theme.colors.darkGreen};\n    font-size: 1.2rem;\n    cursor: pointer;\n\n`;\n\nexport default function Link(props) {\n    return (\n        <LinkElement {...props} />\n    )\n}\n","import React from 'react'\nimport styled from 'styled-components'\nimport { space } from 'styled-system'\nimport { ReactComponent as Bike } from '../img/bike.svg'\nimport Link from '../components/Link'\nconst Wrapper = styled.div`\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    padding: 10px 0px;\n`\n\nconst Flex = styled.div`\n    display: flex;\n    justify-content: flex-start;\n`\n\nconst Text = styled.p`\n    font-weight: bold;\n    font-size: 1.2rem;\n    ${space};\n`\nexport default function NavBar() {\n    return (\n        <Wrapper>\n            <Flex>\n                <Bike width=\"50\" />\n                <Text ml={2}>London</Text>\n            </Flex>\n\n            <Link href=\"github\">Github</Link>\n        </Wrapper>\n    )\n}\n","import React from 'react'\nimport styled from 'styled-components'\nimport theme from '../theme'\nimport { space } from 'styled-system'\n\nconst ButtonElement = styled.div`\n    background-color: ${p => p.selected ? theme.colors.darkGreen : theme.colors.lightGreen};\n    padding: ${p => p.small ? \"10px 40px\" : \"8px 25px\"};\n    color: ${p => p.selected ? theme.colors.white : theme.colors.darkGreen};\n    font-size: ${p => p.small ? \"0.9rem\" : \"1.3rem\"};\n    font-weight:bold;\n    border-radius: 10px;\n    display: inline-block;\n    cursor: pointer;\n    ${space};\n`\nexport default function Button(props) {\n    return (\n        <ButtonElement {...props} />\n    )\n}\n","import React from 'react'\n\n// Data Visualisation Library\nimport * as d3 from \"d3\"\n\n// UI libraries & Theme\nimport theme from './theme';\nimport styled from 'styled-components'\n\n// UI Components\nimport Button from './components/Button'\n\n\n// Configuration variables\nlet WIDTH = 1400,\n    HEIGHT = 300,\n    CELL_SIZE = 25;\n\nlet HEATMAP = [\"#d9ef8b\", \"#a6d96a\", \"#66bd63\", \"#1a9850\", \"#006837\"]\n\n/**\n * Year buttons wrapper\n */\nconst Years = styled.div`\n    display: flex;\n    justify-content: space-between;\n    flex-wrap: wrap;\n\n    div {\n        margin-top: 10px;\n    }\n`\n\n/**\n * Calendar Heatmap Data Visualisation\n */\nexport default class CalendarView extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            maxValue: 0,\n            currentYearIndex: 1,\n        }\n    }\n\n    /**\n     * Create calendar view heat map\n     */\n    createCalendarView = () => {\n        // Create scale for color heat map\n        let color = d3.scaleQuantize()\n            .domain([0, this.getMaxValue()])\n            .range(HEATMAP)\n\n\n        // Create SVG\n        var svg = d3.select(\"body\")\n            .selectAll(\".calendarView\")\n            .append(\"svg\")\n            .attr(\"width\", WIDTH)\n            .attr(\"height\", HEIGHT)\n            .attr(\"viewBox\", [0, 0, WIDTH, HEIGHT])\n            .attr(\"font-family\", \"sans-serif\")\n            .attr(\"font-size\", 12)\n            .attr(\"color\", theme.colors.black)\n\n        // Create Year label\n        var year = svg.selectAll(\"g\")\n            .data([this.props.data[this.state.currentYearIndex]])\n            .join(\"g\")\n            .attr(\"transform\", (d, i) => `translate(40, ${HEIGHT * i + CELL_SIZE * 1.5})`)\n        year.append(\"text\")\n            .attr(\"x\", -5)\n            .attr(\"y\", - 5)\n            .attr(\"font-weight\", \"bold\")\n            .attr(\"text-anchor\", \"end\")\n            .attr(\"fill\", theme.colors.black)\n            .text((d) => d.key)\n\n        // Week days on the column\n        year.append(\"g\")\n            .attr(\"text-anchor\", \"end\")\n            .selectAll(\"text\")\n            .data(d3.range(7).map(i => new Date(1995, 0, i)))\n            .join(\"text\")\n            .attr(\"x\", -5)\n            .attr(\"y\", d => (((d.getUTCDay() + 6) % 7) + 0.5) * CELL_SIZE)\n            .attr(\"dy\", \"0.31em\")\n            .attr(\"fill\", theme.colors.black)\n            .text(d => \"SMTWTFS\"[d.getUTCDay()])\n\n        // Fill cells\n        year.append(\"g\")\n            .selectAll(\"rect\")\n            .data((d) => d.values)\n            .join(\"rect\")\n            .attr(\"width\", CELL_SIZE - 1)\n            .attr(\"height\", CELL_SIZE - 1)\n            .attr(\"x\", d => d3.utcMonday.count(d3.utcYear(d.date), d.date) * CELL_SIZE + 0.5)\n            .attr(\"y\", d => (((d.date.getUTCDay() + 6) % 7) * CELL_SIZE + 0.5))\n            .style(\"fill\", d => color(d.amount))\n            .append(\"title\")\n            .text(d => d.date + \"\\n\" + d.amount)\n\n        // Add month labels\n        let month = year.append(\"g\")\n            .selectAll(\"g\")\n            .data((d) => d3.utcMonths(d3.utcMonth(d.values[0].date), d.values[d.values.length - 1].date))\n            .join(\"g\");\n\n        // Add path to separate months\n        month.filter((d, i) => i).append(\"path\")\n            .attr(\"fill\", \"none\")\n            .attr(\"stroke\", theme.colors.white)\n            .attr(\"stroke-width\", 2.5)\n            .attr(\"d\", this.pathMonth);\n\n        // Add month text \n        month.append(\"text\")\n            .attr(\"x\", d => d3.utcSunday.count(d3.utcYear(d), d3.utcSunday.ceil(d)) * CELL_SIZE + 2)\n            .attr(\"y\", - 5)\n            .attr(\"fill\", theme.colors.black)\n            .text(d3.utcFormat(\"%b\"))\n    }\n\n    /**\n     * Create bar chart on top of calendar heat map\n     */\n    createBarChartTop = () => {\n\n        // Create scale for bar chart\n        let y = d3.scaleLinear()\n            .domain([0, d3.max(this.groupByMonth(this.state.currentYearIndex), d => d.total)]).nice()\n            .range([0, 100])\n\n        // Create SVG for bar chart\n        let svg = d3.select(\"body\")\n            .selectAll(\".barChartTop\")\n            .append(\"svg\")\n            .attr(\"width\", WIDTH)\n            .attr(\"height\", HEIGHT / 2)\n            .attr(\"viewBox\", [0, 0, WIDTH, HEIGHT / 2])\n            .attr(\"font-family\", \"sans-serif\")\n            .attr(\"font-size\", 12)\n            .attr(\"color\", theme.colors.black)\n            .attr(\"transform\", \"scale(1, -1)\")\n\n        // Add bars \n        svg.selectAll(\"g\")\n            .data(this.groupByMonth(this.state.currentYearIndex))\n            .enter()\n            .append(\"rect\")\n            .attr(\"x\", d => 40 + d3.utcSunday.count(d3.utcYear(new Date(2011, d.key, 1)), d3.utcSunday.ceil(new Date(2011, d.key, 1))) * CELL_SIZE + 2)\n            .attr(\"y\", - 5)\n            .attr(\"width\", 20)\n            .attr(\"height\", d => y(d.total))\n            .attr(\"fill\", theme.colors.green)\n\n    }\n    /**\n     * Create path separating months\n     */\n    pathMonth = (t) => {\n        const n = 7\n        const d = Math.max(0, Math.min(n, (t.getUTCDay() + 6) % 7))\n        const w = d3.utcMonday.count(d3.utcYear(t), t);\n        return `${d === 0 ? `M${w * CELL_SIZE},0`\n            : d === n ? `M${(w + 1) * CELL_SIZE},0`\n                : `M${(w + 1) * CELL_SIZE},0V${d * CELL_SIZE}H${w * CELL_SIZE}`}V${n * CELL_SIZE}`;\n    }\n\n    /**\n     * Get max value in data set\n     */\n    getMaxValue = () => {\n        return d3.max(\n            this.props.data.reduce((prev, next) => {\n                return prev.concat(next.values)\n            }, []),\n            elem => elem.amount)\n    }\n    componentDidMount() {\n        this.createBarChartTop()\n        this.createCalendarView()\n    }\n\n    /**\n     * Helper function to re-render Calendar View\n     */\n    removePreviousCalendarView = () => {\n        const chart = document.getElementsByClassName(\"calendarView\")[0];\n        while (chart.hasChildNodes())\n            chart.removeChild(chart.lastChild);\n    }\n\n    /**\n     * Helper function to re-render Bar Chart View\n     */\n    removePreviousBarChartView = () => {\n        const barChart = document.getElementsByClassName(\"barChartTop\")[0]\n        while (barChart.hasChildNodes())\n            barChart.removeChild(barChart.lastChild);\n    }\n\n    /**\n     * Called whenever the state changes -- user changes year\n     * @param {*} prevProps \n     * @param {*} prevState \n     */\n    componentDidUpdate(prevProps, prevState) {\n        if (prevState.currentYearIndex !== this.state.currentYearIndex) {\n            // re render calendar heat map\n            this.removePreviousCalendarView()\n            this.createCalendarView()\n\n            // re render bar chart\n            this.removePreviousBarChartView()\n            this.createBarChartTop()\n        }\n    }\n\n    /**\n     * Group data by month \n     */\n    groupByMonth = (currentIndexYear) => {\n        let grouped = d3.nest()\n            .key(d => d.date.getMonth())\n            .entries(this.props.data[currentIndexYear].values)\n        grouped.forEach(month => {\n            month.total = month.values.reduce((prev, current) => prev + current.amount, 0)\n        })\n        return grouped\n    }\n\n    render() {\n        return (\n            <div>\n                <div className=\"barChartTop\"></div>\n                <div className=\"calendarView\"></div>\n                <p>Select a year</p>\n                <Years>{this.props.data.map((elem, i) => {\n                    return (\n                        <Button key={i} mr={2} small selected={this.state.currentYearIndex === elem.key - 2010} onClick={() => {\n                            this.setState({ currentYearIndex: elem.key - 2010 })\n                        }}>{elem.key}</Button>)\n                })}</Years>\n            </div >\n        )\n    }\n}\n\n\n\n\n\n\n\n\n\n\n","import React, { Component } from 'react'\n\n// Data Visualisation Library\nimport * as d3 from \"d3\"\n\n// UI libraries & Theme\nimport styled from 'styled-components'\n\n// UI Components\nimport Button from './components/Button'\n\n// Configuration variables\nlet HEATMAP = [\"#d9ef8b\", \"#a6d96a\", \"#66bd63\", \"#1a9850\", \"#006837\"]\n\n/**\n * Year buttons wrapper\n */\nconst Years = styled.div`\n    display: flex;\n    justify-content: space-between;\n    flex-wrap: wrap;\n\n    div {\n        margin-top: 10px;\n    }\n`\n\n/**\n * Circular Diagram Chart\n */\nexport default class CircularDiagram extends Component {\n    constructor(props) {\n        super(props)\n\n        this.state = {\n            currentYearIndex: 2,\n        }\n\n        this.grouped = []\n\n    }\n\n    /**\n     * Get maximum value from all weeks\n     */\n    getMaxValue = () => {\n        return d3.max(this.grouped.map(d => d.total))\n    }\n\n    /**\n     * Group data by week\n     */\n    groupByWeek = (currentIndexYear) => {\n        let grouped = d3.nest()\n            .key(d => this.getWeekNumber(d.date))\n            .entries(this.props.data[currentIndexYear].values)\n        grouped.forEach(week => {\n            week.total = week.values.reduce((prev, current) => prev + current.amount, 0)\n        })\n        return grouped\n    }\n\n    getWeekNumber = (d) => {\n        // Copy date so don't modify original\n        d = new Date(Date.UTC(d.getFullYear(), d.getMonth(), d.getDate()));\n        // Set to nearest Thursday: current date + 4 - current day number\n        // Make Sunday's day number 7\n        d.setUTCDate(d.getUTCDate() + 4 - (d.getUTCDay() || 7));\n        // Get first day of year\n        var yearStart = new Date(Date.UTC(d.getUTCFullYear(), 0, 1));\n        // Calculate full weeks to nearest Thursday\n        var weekNo = Math.ceil((((d - yearStart) / 86400000) + 1) / 7);\n        // Return array of year and week number\n        return weekNo\n    }\n\n    async componentDidMount() {\n\n        console.log(this.getMaxValue())\n        this.createCircularDiagram()\n    }\n\n    /**\n     * Create Circular Diagram\n     */\n    createCircularDiagram = async () => {\n        this.grouped = this.groupByWeek(this.state.currentYearIndex)\n\n        // Create scale for color\n        let color = d3.scaleQuantize()\n            .domain([0, this.getMaxValue()])\n            .range(HEATMAP);\n\n        // Set the dimensions and margins of the graph\n        var margin = { top: 100, right: 50, bottom: 100, left: 50 },\n            width = 850 - margin.left - margin.right,\n            height = 850 - margin.top - margin.bottom,\n            innerRadius = 200,\n            outerRadius = Math.min(width, height) / 2;\n\n        // Apend the SVG object\n        var svg = d3.select(\".circularDiagram\")\n            .append(\"svg\")\n            .attr(\"width\", width + margin.left + margin.right)\n            .attr(\"height\", height + margin.top + margin.bottom)\n            .append(\"g\")\n            .attr(\"transform\", \"translate(\" + (width / 2 + margin.left) + \",\" + (height / 2 + margin.top) + \")\");\n\n\n        // Create scale for x axis\n        var x = d3.scaleBand()\n            .range([0, 2 * Math.PI])\n            .align(0)\n            .domain(this.grouped.map((x, i) => i))\n\n        // Create scale for y axis\n        var y = d3.scaleLinear()\n            .range([innerRadius, outerRadius])\n            .domain([0, this.getMaxValue()])\n\n        // Add the bars\n        svg.append(\"g\")\n            .selectAll(\"path\")\n            .data(this.grouped)\n            .enter()\n            .append(\"path\")\n            .attr(\"fill\", d => color(d.total))\n            .attr(\"d\", d3.arc()\n                .innerRadius(innerRadius)\n                .outerRadius(d => y(d.total))\n                .startAngle(function (d, i) { return x(i); })\n                .endAngle(function (d, i) { return x(i) + x.bandwidth(); })\n                .padAngle(0.01)\n            )\n\n\n        // Add labels to the circular graph\n        svg.append(\"g\")\n            .selectAll(\"g\")\n            .data(this.grouped)\n            .enter()\n            .append(\"g\")\n            .attr(\"text-anchor\", function (d, i) { return (x(i) + x.bandwidth() / 2 + Math.PI) % (2 * Math.PI) < Math.PI ? \"end\" : \"start\"; })\n            .attr(\"transform\", function (d, i) { return \"rotate(\" + ((x(i) + x.bandwidth() / 2) * 180 / Math.PI - 90) + \")\" + \"translate(\" + (y(d.total) + 50) + \",0)\"; })\n            .append(\"text\")\n            .text((d, i) => `Week ${i}`)\n            .attr(\"transform\", function (d, i) { return (x(i) + x.bandwidth() / 2 + Math.PI) % (2 * Math.PI) < Math.PI ? \"rotate(180)\" : \"rotate(0)\"; })\n            .style(\"font-size\", \"11px\")\n            .attr(\"alignment-baseline\", \"middle\")\n\n\n    }\n\n    /**\n     * Helper function to re-render Circular Diagram\n     */\n    removeCircularDiagram = () => {\n        const circularDiagram = document.getElementsByClassName(\"circularDiagram\")[0]\n        while (circularDiagram.hasChildNodes())\n            circularDiagram.removeChild(circularDiagram.lastChild);\n    }\n\n    /**\n     * Called whenever the state changes -- user changes year\n     * @param {*} prevProps \n     * @param {*} prevState \n     */\n    componentDidUpdate(prevProps, prevState) {\n        if (prevState.currentYearIndex !== this.state.currentYearIndex) {\n            // re render circular diagram\n            this.removeCircularDiagram()\n            this.createCircularDiagram()\n        }\n    }\n\n    render() {\n        return (\n            <div>\n                <div style={{ display: \"flex\", justifyContent: \"center\" }} className=\"circularDiagram\"></div>\n                <p>Select a year</p>\n                <Years>{this.props.data.map((elem, i) => {\n                    return (\n                        <Button key={i} mr={2} small selected={this.state.currentYearIndex === elem.key - 2010} onClick={() => {\n                            this.setState({ currentYearIndex: elem.key - 2010 })\n                        }}>{elem.key}</Button>)\n                })}</Years>\n            </div >\n        )\n    }\n}\n","import React, { Component } from 'react';\n\n// Data Visualisation Library\nimport * as d3 from \"d3\"\n\n// UI libraries & Theme\nimport theme from './theme';\nimport styled from 'styled-components'\nimport { space } from 'styled-system'\n\n// UI Components\nimport NavBar from './components/NavBar'\nimport Link from './components/Link';\n\n// d3 Visualisations\nimport CalendarView from './CalendarView'\nimport CircularDiagram from './CircularDiagram'\n\n// Data source file \nimport cycles from \"./data/cycles.csv\"\n\n/**\n * Headline text, located on the main page\n */\nconst Headline = styled.p`\n  font-size: 4rem;\n  font-weight: bold;\n  max-width: 700px;\n  ${space};\n  span {\n  }\n`\n/**\n * Introduction, description below Headline  \n */\nconst Intro = styled.p`\n  max-width: 500px;\n  ${space};\n`\n\n/**\n * Main Application / Single Page App\n */\nexport default class App extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      data: [{ key: \"\", values: [] }]\n    }\n  }\n\n  /**\n   * Loading data from the csv file\n   * and attaching it to the state\n   */\n  async componentDidMount() {\n    let result = await this.loadData(cycles)\n    this.setState({\n      data: result\n    })\n  }\n\n  /**\n   * Function to load data from a csv file\n   */\n  loadData = async (fileName) => {\n    return await d3.csv(fileName).then(csv => {\n      //group data by year\n      var data = d3.nest()\n        .key(function (d) { return d.date.split(\"-\")[0]; })\n        .entries(csv)\n      // convert the string date to actual date object\n      data.forEach(a => {\n        a.values.forEach(b => {\n          b.date = d3.utcParse(\"%Y-%m-%d\")(b.date)\n          b.amount = parseInt(b.amount.toString().replace(\",\", \"\"))\n        })\n      })\n      return data\n    }).catch(error => {\n      console.log(error)\n      throw error\n    })\n  }\n\n  /**\n   * Render the components in this Page\n   */\n  render() {\n    if (this.state.data.length === 1) {\n      return <div>Loading...</div>\n    } else {\n      return (\n        <div className=\"container\" style={{ backgroundColor: theme.colors.white }}>\n          <NavBar />\n          <div>\n            <Headline mt={6} mb={3}><span>Cycling in London Over the Past Decade</span></Headline>\n            <Intro mb={6}>Lorem ipsum dolor sit amet, <Link href=\"\">consetetur</Link>  sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et</Intro>\n            <CalendarView data={this.state.data} />\n            <div style={{ height: \"100px\" }}></div>\n            <CircularDiagram data={this.state.data} />\n            <div style={{ height: \"100px\" }}></div>\n          </div>\n\n        </div>\n      )\n    }\n  }\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}